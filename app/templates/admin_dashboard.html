{% extends "base.html" %}

{% block content %}

<h3 class="mb-4">Admin Dashboard ðŸ‘‘</h3>


<!-- ================= STATS CARDS ================= -->
<div class="row mb-4">

<div class="col-md-4">
<div class="card text-bg-primary">
<div class="card-body">
<h5>Total Users</h5>
<h3>{{ users|length }}</h3>
</div>
</div>
</div>

<div class="col-md-4">
<div class="card text-bg-success">
<div class="card-body">
<h5>Total Tasks</h5>
<h3>{{ tasks|length }}</h3>
</div>
</div>
</div>

<div class="col-md-4">
<div class="card text-bg-warning">
<div class="card-body">
<h5>Pending Tasks</h5>
<h3>
{{ tasks | selectattr(4,"equalto","Pending") | list | length }}
</h3>
</div>
</div>
</div>

</div>


<!-- ================= USERS TABLE ================= -->
<h4>Total Users</h4>

<table class="table table-bordered table-striped table-hover">

<thead class="table-dark">
<tr>
<th>ID</th>
<th>Name</th>
<th>Email</th>
<th>Role</th>
</tr>
</thead>

<tbody>
{% for u in users %}
<tr>

<td>{{u[0]}}</td>
<td>{{u[1]}}</td>
<td>{{u[2]}}</td>

<td>
{% if u[3] == "admin" %}
<span class="badge bg-danger">Admin</span>
{% else %}
<span class="badge bg-secondary">User</span>
{% endif %}
</td>

</tr>
{% endfor %}
</tbody>

</table>


<!-- ================= TASK TABLE ================= -->
<h4 class="mt-4">All Tasks</h4>

<table class="table table-bordered table-striped table-hover">

<thead class="table-dark">
<tr>
<th>ID</th>
<th>Title</th>
<th>Created By</th>
<th>Status</th>
<th>Action</th>
</tr>
</thead>

<tbody>

{% for t in tasks %}
<tr>

<td>{{t[0]}}</td>

<td>
<strong>{{t[1]}}</strong>
</td>

<td>{{t[8]}}</td>

<td>
{% if t[4] == "Completed" %}
<span class="badge bg-success">Completed</span>

{% elif t[4] == "In Progress" %}
<span class="badge bg-warning text-dark">In Progress</span>

{% else %}
<span class="badge bg-secondary">Pending</span>
{% endif %}
</td>

<td>
<a href="/edit/{{t[0]}}"
class="btn btn-warning btn-sm">
Edit
</a>

<a href="/delete/{{t[0]}}"
class="btn btn-danger btn-sm"
onclick="return confirm('Delete this task?')">
Delete
</a>
</td>

</tr>
{% endfor %}

</tbody>

</table>

{% endblock %}